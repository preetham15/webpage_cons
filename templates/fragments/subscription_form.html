<style>
  body {
    font-family: "Poppins", sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    margin: 0;
    padding: 0;
  }

  .main-content {
    margin-top: 80px; /* space for navbar */
    padding: 20px;
  }

  /* Login Notice */
  #loginNotice {
    background-color: #222;
    color: #ff4d4f;
    padding: 12px 20px;
    font-weight: 500;
    text-align: center;
    border-bottom: 1px solid #444;
    margin: 0 auto 20px auto;
    max-width: 900px;
    border-radius: 8px;
  }

  /* Subscription Plan Cards (vertical stack with margins) */
  .plan-card {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    background-color: #1e1e1e;
    border-radius: 12px;
    padding: 20px 30px;
    margin: 0 auto 20px auto; /* center with margins */
    max-width: 900px; /* keeps some margin on left/right */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .plan-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7);
  }

  .plan-left h4 {
    margin: 0;
    font-size: 1.2rem;
    font-weight: 600;
  }

  .plan-middle ul {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .plan-middle li {
    color: #ccc;
    font-size: 0.95rem;
  }

  .plan-right {
    text-align: right;
    min-width: 150px;
  }

  .plan-right h5 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 10px;
  }

  .plan-right button {
    padding: 8px 16px;
    border-radius: 6px;
    border: none;
    background-color: #292929;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
  }

  .plan-right button:hover {
    background-color: #3a3a3a;
    transform: scale(1.03);
  }

  /* Payment Section */
  .card {
    background-color: #1e1e1e;
    border-radius: 12px;
    padding: 20px;
    margin: 0 auto 20px auto;
    max-width: 900px; /* aligned with plan cards */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
  }

  .card h3 {
    margin-bottom: 15px;
    font-size: 1.2rem;
    font-weight: 600;
  }

  .form-control,
  .form-select {
    background-color: #2a2a2a;
    border: 1px solid #444;
    border-radius: 6px;
    color: #fff;
    padding: 8px 12px;
  }

  .btn-primary,
  .btn-success {
    background-color: #3a3a3a;
    border: none;
    color: #fff;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .btn-primary:hover,
  .btn-success:hover {
    background-color: #505050;
    transform: scale(1.03);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .plan-card {
      flex-direction: column;
      align-items: flex-start;
      text-align: left;
    }

    .plan-right {
      text-align: left;
      margin-top: 10px;
      width: 100%;
    }
  }
</style>

<div class="main-content">
  <!-- Subscription Plans (stacked vertically) -->
  <div id="planCards">
    <div id="loginNotice" style="display: none">
      You need to login to buy a plan.
    </div>
  </div>

  <!-- Payment Section -->
  <div class="card d-none mt-3" id="paymentSection">
    <!-- Coupon -->
    <div class="card d-none mb-3" id="couponSection">
      <h3>Apply Coupon</h3>
      <div class="input-group mb-3">
        <input
          id="couponCode"
          class="form-control"
          placeholder="Enter coupon code"
        />
        <button class="btn btn-primary" onclick="applyCoupon()">Apply</button>
      </div>
      <div id="couponResult" class="text-success"></div>
    </div>

    <!-- Payment -->
    <h3>Select Payment Method</h3>
    <select class="form-select" id="paymentMethod">
      <option value="">-- Select --</option>
      <option value="credit">Credit Card</option>
      <option value="paypal">PayPal</option>
      <option value="upi">UPI</option>
    </select>
    <div class="text-center mt-3">
      <button class="btn btn-success btn-lg" onclick="checkout()">
        Buy Now
      </button>
      <div id="checkoutResult" class="mt-3 fw-bold"></div>
    </div>
  </div>
</div>

<script>
  const plans = [
    { title: "Super User", price: 29.99 },
    { title: "Fitbit User", price: 14.99 },
    { title: "Basic", price: 0 },
  ];

  const planFeatures = {
    "Super User": ["Unlimited access", "Priority support", "Free upgrades"],
    "Fitbit User": ["Track health data", "Fitness insights"],
    Basic: ["Limited access"],
  };

  const userLoggedIn = false;
  let selectedPlan = null;

  const planCards = document.getElementById("planCards");
  const couponSection = document.getElementById("couponSection");
  const paymentSection = document.getElementById("paymentSection");
  const loginNotice = document.getElementById("loginNotice");

  if (!userLoggedIn) loginNotice.style.display = "block";

  plans.forEach((plan) => {
    const card = document.createElement("div");
    card.className = "plan-card";
    card.innerHTML = `
      <div class="plan-left"><h4>${plan.title}</h4></div>
      <div class="plan-middle">
        <ul>${planFeatures[plan.title]
          .map((f) => `<li>${f}</li>`)
          .join("")}</ul>
      </div>
      <div class="plan-right">
        <h5>$${plan.price.toFixed(2)}</h5>
        <button onclick='selectPlan("${plan.title}")'>Select Plan</button>
      </div>
    `;
    planCards.appendChild(card);
  });

  function selectPlan(plan) {
    if (!userLoggedIn) {
      alert("You need to login to buy a plan.");
      return;
    }
    selectedPlan = plan;
    couponSection.classList.remove("d-none");
    paymentSection.classList.remove("d-none");
    paymentSection.scrollIntoView({ behavior: "smooth" });
  }

  function applyCoupon() {
    const coupon = document.getElementById("couponCode").value;
    document.getElementById("couponResult").innerText = coupon
      ? `Applied coupon: ${coupon}`
      : "";
  }

  function checkout() {
    const paymentMethod = document.getElementById("paymentMethod").value;
    if (!paymentMethod) {
      alert("Please select a payment method");
      return;
    }
    alert(`Purchased ${selectedPlan} using ${paymentMethod}`);
  }
</script>
